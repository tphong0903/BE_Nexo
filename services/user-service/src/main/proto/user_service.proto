syntax = "proto3";

package org.nexo.grpc.user;

option java_package = "org.nexo.grpc.user";
option java_outer_classname = "UserServiceProto";

service UserService {
  rpc CreateUser(CreateUserRequest) returns (CreateUserResponse);
  rpc UpdateUserEmailVerification(UpdateEmailVerificationRequest) returns (UpdateEmailVerificationResponse);
  rpc UpdateAccountStatus(UpdateAccountStatusRequest) returns (UpdateAccountStatusResponse);
  rpc GetUserFollowees(GetUserFolloweesRequest) returns (GetUserFolloweesResponse);
}

message CreateUserRequest {
  string keycloak_user_id = 1;
  string email = 2;
  string username = 3;
  string full_name = 4;
}

message CreateUserResponse {
  bool success = 1;
  string message = 2;
  int64 user_id = 3;
}

message UpdateEmailVerificationRequest {
  string keycloak_user_id = 1;
  bool email_verified = 2;
}

message UpdateEmailVerificationResponse {
  bool success = 1;
  string message = 2;
}

message UpdateAccountStatusRequest {
  string keycloak_user_id = 1;
  string account_status = 2; // PENDING, ACTIVE, INACTIVE, BLOCKED
}

message UpdateAccountStatusResponse {
  bool success = 1;
  string message = 2;
}

message GetUserFolloweesRequest {
  int64 user_id = 1;
}

message GetUserFolloweesResponse {
  bool success = 1;
  string message = 2;
  repeated FolloweeInfo followees = 3;
}

message FolloweeInfo {
  string user_id = 1;
  string user_name = 2;
  string avatar = 3;
  bool is_close_friend = 4;
}